"use strict";(self.webpackChunkfaltai=self.webpackChunkfaltai||[]).push([[977],{977:(e,s,t)=>{t.r(s),t.d(s,{default:()=>c});var r=t(43),a=t(204),i=t(579);const n={1:{nome:"Ferro",cor:"bg-gray-500",requisito:0,descricao:"0-20% de presen\xe7a"},2:{nome:"Bronze",cor:"bg-yellow-700",requisito:.2,descricao:"20-40% de presen\xe7a"},3:{nome:"Prata",cor:"bg-gray-400",requisito:.4,descricao:"40-60% de presen\xe7a"},4:{nome:"Ouro",cor:"bg-yellow-500",requisito:.6,descricao:"60-80% de presen\xe7a"},5:{nome:"Diamante",cor:"bg-blue-600",requisito:.8,descricao:"80-100% de presen\xe7a"}};const c=function(e){let{materias:s,onClose:t,onNotification:c}=e;const[l,o]=(0,r.useState)(1),[m,d]=(0,r.useState)(0),[x,u]=(0,r.useState)(0);(0,r.useEffect)((()=>{const{nivel:e,progresso:t,porcentagem:r}=(()=>{if(!Array.isArray(s)||0===s.length)return{nivel:1,progresso:0,porcentagem:0};const e=s.reduce(((e,s)=>e+(Number(s.faltas)||0)),0),t=s.reduce(((e,s)=>e+(Number(s.maxFaltas)||0)),0);if(0===t)return{nivel:1,progresso:0,porcentagem:0};const r=Math.max(0,100-e/t*100),a=Math.min(1,Math.max(0,r/100));return a>=.8?{nivel:5,progresso:100,porcentagem:Number(r.toFixed(1))}:a>=.6?{nivel:4,progresso:Number((500*(a-.6)).toFixed(1)),porcentagem:Number(r.toFixed(1))}:a>=.4?{nivel:3,progresso:Number((500*(a-.4)).toFixed(1)),porcentagem:Number(r.toFixed(1))}:a>=.2?{nivel:2,progresso:Number((500*(a-.2)).toFixed(1)),porcentagem:Number(r.toFixed(1))}:{nivel:1,progresso:Number((500*a).toFixed(1)),porcentagem:Number(r.toFixed(1))}})();if(o(Number(e)||1),d(Number(t)||0),u(Number(r)||0),Array.isArray(s)&&"function"===typeof c){const e=JSON.parse(localStorage.getItem("notificacoes_enviadas")||"[]"),t=[];if(s.forEach(((s,r)=>{const a=Number(s.faltas)||0,i=Number(s.maxFaltas)||0,n=String(s.nome||"uma mat\xe9ria"),l=`limite-faltas-${n}-${r}`;a>=i&&i>0&&!e.includes(l)&&(c({titulo:"\u26a0\ufe0f Limite de Faltas",mensagem:`Voc\xea atingiu o limite de faltas em ${n}`,tipo:"alerta"}),t.push(l))})),t.length>0){const s=[...e,...t];localStorage.setItem("notificacoes_enviadas",JSON.stringify(s))}}}),[s,c]);const g=n[l],N=n[l+1];return(0,i.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,i.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsx)(a.SBv,{className:"text-blue-600 text-2xl"}),(0,i.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"N\xedvel de Presen\xe7a"})]}),(0,i.jsx)("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:(0,i.jsx)(a.QCr,{})})]}),(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:`inline-flex items-center justify-center w-16 h-16 rounded-full ${g.cor} text-white mb-2`,children:(0,i.jsx)("span",{className:"text-2xl font-bold",children:l})}),(0,i.jsx)("h3",{className:"text-lg font-semibold",children:g.nome}),(0,i.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Presen\xe7a atual: ",Number(x).toFixed(1)||"0.0","%"]}),N&&(0,i.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Pr\xf3ximo n\xedvel: ",N.nome]})]}),l<5&&(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,i.jsx)("div",{className:`h-full ${g.cor} transition-all duration-500`,style:{width:`${Number(m)||0}%`}})}),(0,i.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[(0,i.jsx)("span",{children:g.descricao}),N&&(0,i.jsx)("span",{children:N.descricao})]})]}),(0,i.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,i.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"N\xedveis de Presen\xe7a:"}),(0,i.jsx)("div",{className:"grid grid-cols-1 gap-2",children:Object.entries(n).map((e=>{let[s,t]=e;return(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("div",{className:`w-3 h-3 rounded-full ${t.cor}`}),(0,i.jsxs)("span",{className:"text-sm text-gray-600",children:[t.nome,": ",t.descricao]})]},s)}))})]})]})]})})}}}]);
//# sourceMappingURL=977.7ad3bb3e.chunk.js.map