"use strict";(self.webpackChunkfaltai=self.webpackChunkfaltai||[]).push([[693],{693:(e,a,t)=>{t.r(a),t.d(a,{default:()=>d});var s=t(43),r=t(204),l=t(698),i=t(628),o=t(579);const d=function(e){let{setEditModalOpen:a,editIndex:t}=e;const{materias:d,editarMateria:n}=(0,l.Y)(),{addError:c,addSuccess:x}=(0,i.q)(),[u,m]=(0,s.useState)(""),[p,h]=(0,s.useState)(""),[v,b]=(0,s.useState)("1"),[j,g]=(0,s.useState)([]),[f,y]=(0,s.useState)({tipo:"",data:"",descricao:""}),[N,C]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{if(null!==t&&d&&d[t]){const e=d[t];m(String(e.nome||"")),h(String(e.horas||"")),b(String(e.pesoFalta||"1")),g(Array.isArray(e.avaliacoes)?e.avaliacoes:[])}}),[t,d]),null!==t&&d&&d[t]?(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,o.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,o.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Editar Mat\xe9ria"}),(0,o.jsx)("button",{onClick:()=>a(!1),className:"text-gray-500 hover:text-gray-700",children:(0,o.jsx)(r.QCr,{})})]}),(0,o.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),u&&p)try{const e=Math.floor(.25*parseInt(p)/parseInt(v)),s={...d[t],nome:String(u),horas:Number(p),pesoFalta:Number(v),maxFaltas:Number(e),avaliacoes:j||[]};await n(t,s),x("Mat\xe9ria editada com sucesso!"),a(!1)}catch(s){c("Erro ao salvar mat\xe9ria"),console.error("Erro:",s)}else c("Preencha todos os campos obrigat\xf3rios")},className:"space-y-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome da Mat\xe9ria"}),(0,o.jsx)("input",{type:"text",value:u,onChange:e=>m(e.target.value),className:"w-full px-3 py-2 border rounded-md",placeholder:"Ex: C\xe1lculo 1",required:!0})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Carga Hor\xe1ria"}),(0,o.jsxs)("select",{value:p,onChange:e=>h(e.target.value),className:"w-full px-3 py-2 border rounded-md",required:!0,children:[(0,o.jsx)("option",{value:"",children:"Selecione"}),(0,o.jsx)("option",{value:"30",children:"30 horas"}),(0,o.jsx)("option",{value:"45",children:"45 horas"}),(0,o.jsx)("option",{value:"60",children:"60 horas"}),(0,o.jsx)("option",{value:"75",children:"75 horas"}),(0,o.jsx)("option",{value:"90",children:"90 horas"}),(0,o.jsx)("option",{value:"120",children:"120 horas"})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Peso da Falta"}),(0,o.jsxs)("select",{value:v,onChange:e=>b(e.target.value),className:"w-full px-3 py-2 border rounded-md",children:[(0,o.jsx)("option",{value:"1",children:"1 falta por vez"}),(0,o.jsx)("option",{value:"2",children:"2 faltas por vez"}),(0,o.jsx)("option",{value:"4",children:"4 faltas por vez"})]})]}),(0,o.jsx)("div",{className:"border-t pt-4",children:(0,o.jsxs)("button",{type:"button",onClick:()=>C(!N),className:"text-blue-600 hover:text-blue-700 text-sm flex items-center",children:[(0,o.jsx)(r.OiG,{className:"mr-1"})," ",N?"Ocultar Avalia\xe7\xf5es":"Adicionar Avalia\xe7\xf5es"]})}),N&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,o.jsxs)("div",{className:"flex gap-2",children:[(0,o.jsx)("input",{type:"text",value:f.tipo,onChange:e=>y((a=>({...a,tipo:e.target.value}))),className:"px-3 py-2 border rounded-md",placeholder:"Tipo (ex: Prova, Trabalho, Semin\xe1rio)",required:!0}),(0,o.jsx)("input",{type:"date",value:f.data,onChange:e=>y((a=>({...a,data:e.target.value}))),className:"flex-1 px-3 py-2 border rounded-md",required:!0})]}),(0,o.jsxs)("div",{className:"flex gap-2",children:[(0,o.jsx)("input",{type:"text",value:f.descricao,onChange:e=>y((a=>({...a,descricao:e.target.value}))),className:"flex-1 px-3 py-2 border rounded-md",placeholder:"Descri\xe7\xe3o (opcional)"}),(0,o.jsx)("button",{type:"button",onClick:()=>{f.tipo&&f.data?(g((e=>[...e,{...f,id:Date.now()}])),y({tipo:"",data:"",descricao:""})):c("Tipo e data s\xe3o obrigat\xf3rios para a avalia\xe7\xe3o")},className:"px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Adicionar"})]})]}),(0,o.jsx)("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:j.map((e=>(0,o.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded-md",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("div",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs font-medium",children:e.tipo}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-sm font-medium",children:new Date(e.data).toLocaleDateString("pt-BR")}),e.descricao&&(0,o.jsx)("p",{className:"text-xs text-gray-500",children:e.descricao})]})]}),(0,o.jsx)("button",{type:"button",onClick:()=>{return a=e.id,void g((e=>e.filter((e=>e.id!==a))));var a},className:"text-gray-400 hover:text-red-500",children:(0,o.jsx)(r.QCr,{})})]},e.id)))})]}),(0,o.jsxs)("div",{className:"flex justify-end space-x-2 pt-4",children:[(0,o.jsx)("button",{type:"button",onClick:()=>a(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancelar"}),(0,o.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Salvar"})]})]})]})}):null}}}]);
//# sourceMappingURL=693.86c24618.chunk.js.map