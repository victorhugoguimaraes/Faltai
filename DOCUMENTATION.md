# üìö Documenta√ß√£o do Projeto Falta√≠

## üìã Vis√£o Geral
Sistema web para gerenciamento de faltas acad√™micas com suporte offline/online, notifica√ß√µes e gamifica√ß√£o.

---

## üèóÔ∏è Estrutura de Arquivos

### üìÅ `/src`

#### **Arquivos Principais**
- **`App.js`** - Componente principal da aplica√ß√£o
  - Gerencia rotas e estados globais
  - Controla modais e navega√ß√£o
  - Integra todos os componentes principais

- **`index.js`** - Ponto de entrada da aplica√ß√£o
  - Inicializa React
  - Configura providers (Auth, Materias, Error)
  - Registra Service Worker para PWA

- **`firebase.js`** - Configura√ß√£o do Firebase
  - Inicializa Auth e Firestore
  - Suporta modo demo/local
  - Exporta inst√¢ncias para toda aplica√ß√£o

---

### üìÅ `/src/components`

#### **Componentes de Modal**
- **`AddMateriaModal.js`** - Modal para adicionar nova mat√©ria
- **`EditMateriaModal.js`** - Modal para editar mat√©ria existente
- **`DeleteMateriaModal.js`** - Modal de confirma√ß√£o de exclus√£o
- **`LogoutConfirmationModal.js`** - Confirma logout do usu√°rio
- **`LoginModal.js`** - Modal de login (email/Google)
- **`RegisterModal.js`** - Modal de registro de novo usu√°rio
- **`ResetPasswordModal.js`** - Modal para recupera√ß√£o de senha
- **`AnonymousModal.js`** - Modal para usu√°rios n√£o autenticados
- **`CalendarModal.js`** - Modal com calend√°rio de faltas

#### **Componentes de Visualiza√ß√£o**
- **`Home.js`** - P√°gina inicial com cards de mat√©rias
- **`MateriaList.js`** - Lista de mat√©rias com controles de faltas
  - Exibe progresso de faltas
  - Bot√µes para adicionar/remover faltas
  - A√ß√µes de editar/deletar mat√©ria
  
- **`Dashboard.js`** - Painel com estat√≠sticas e gr√°ficos
  - Gr√°ficos de pizza e barras
  - Estat√≠sticas gerais
  - An√°lise de faltas por mat√©ria

- **`Login.js`** - P√°gina de login completa
- **`FaltaiCalendar.js`** - Calend√°rio visual de faltas
- **`AvaliacoesCalendario.js`** - Calend√°rio de avalia√ß√µes
- **`CalendarioAcademico.js`** - Calend√°rio acad√™mico geral

#### **Componentes de Sistema**
- **`NotificationManager.js`** - Gerenciador de notifica√ß√µes
  - Exibe notifica√ß√µes in-app
  - Gerencia permiss√µes de notifica√ß√£o
  - Configura√ß√µes de tipos de notifica√ß√£o
  
- **`ScheduledNotifications.js`** - Lista de notifica√ß√µes agendadas
- **`GamificationSystem.js`** - Sistema de conquistas e gamifica√ß√£o

#### **Componentes Comuns** (`/common`)
- **`LoadingSpinner.js`** - Indicador de carregamento
- **`NotificationToast.js`** - Toast de notifica√ß√µes tempor√°rias

---

### üìÅ `/src/contexts`

#### **AuthContext.js**
Gerencia autentica√ß√£o e estado do usu√°rio
```javascript
// Fun√ß√µes principais:
- login(email, senha)           // Login com email/senha
- loginGoogle()                  // Login com Google
- register(nome, email, senha)  // Registro de novo usu√°rio
- logout()                       // Desconecta usu√°rio
- toggleMode()                   // Alterna online/offline

// Estados:
- user                           // Dados do usu√°rio atual
- loading                        // Estado de carregamento
- isOnline                       // Modo online (Firebase) ou offline (localStorage)
```

#### **MateriasContext.js**
Gerencia estado e opera√ß√µes com mat√©rias
```javascript
// Fun√ß√µes principais:
- adicionarMateria(nome, horas, pesoFalta)  // Adiciona nova mat√©ria
- editarMateria(index, dados)               // Edita mat√©ria existente
- deletarMateria(index)                     // Remove mat√©ria
- atualizarFaltas(index, faltas, datas)     // Atualiza contador de faltas
- adicionarFalta(index)                     // Adiciona uma falta
- removerFalta(index)                       // Remove uma falta

// Estados:
- materias                                   // Array de todas as mat√©rias
```

#### **ErrorContext.js**
Gerencia mensagens de erro e sucesso
```javascript
// Fun√ß√µes principais:
- addError(message)                         // Adiciona mensagem de erro
- addSuccess(message)                       // Adiciona mensagem de sucesso
- addWarning(message)                       // Adiciona mensagem de aviso
- clearErrors()                             // Limpa todas as mensagens

// Estados:
- errors                                    // Array de mensagens
```

---

### üìÅ `/src/services`

#### **authService.js**
Servi√ßo de autentica√ß√£o Firebase
```javascript
// Fun√ß√µes exportadas:
- loginWithEmail(email, senha)              // Login com credenciais
- registerUser(nome, email, senha)          // Registro de usu√°rio
- loginWithGoogle()                         // Login com Google (redirect mobile/popup desktop)
- handleGoogleRedirect()                    // Processa redirect do Google
- resetPassword(email)                      // Envia email de recupera√ß√£o
- logout()                                  // Faz logout
```

#### **materiaService.js**
Servi√ßo CRUD de mat√©rias
```javascript
// Fun√ß√µes exportadas:
- addMateria(nome, horas, peso, materias, isOnline)    // Adiciona mat√©ria
- editMateria(index, nome, horas, peso, materias, isOnline)  // Edita mat√©ria
- deleteMateria(index, materias, isOnline)             // Remove mat√©ria
- addFalta(index, materias, isOnline)                  // Adiciona falta
- removeFalta(index, materias, isOnline)               // Remove falta

// C√°lculo autom√°tico: maxFaltas = Math.floor(horas * 0.25 / pesoFalta)
```

#### **notificationService.js**
Servi√ßo de notifica√ß√µes push
```javascript
// Fun√ß√µes principais:
- requestPermission()                       // Solicita permiss√£o de notifica√ß√£o
- init()                                    // Inicializa service worker
- scheduleNotification(data)                // Agenda notifica√ß√£o
- sendPushNotification(title, body, data)   // Envia notifica√ß√£o push
```

---

### üìÅ `/src/utils`

#### **validation.js**
Fun√ß√µes de valida√ß√£o de dados
```javascript
// Valida√ß√µes de campos:
- validateEmail(email)                      // Valida formato de email
- validatePassword(password)                // Valida requisitos de senha
- validateMateria(materia)                  // Valida dados de mat√©ria
- validateAvaliacao(avaliacao)              // Valida dados de avalia√ß√£o
- validateFalta(falta)                      // Valida dados de falta
- validateUser(userData)                    // Valida dados de usu√°rio

// Valida√ß√µes gen√©ricas:
- validateRequired(value, fieldName)        // Valida campo obrigat√≥rio
- validateLength(value, min, max, name)     // Valida tamanho de string
- validateRange(value, min, max, name)      // Valida intervalo num√©rico

// Sanitiza√ß√£o:
- sanitizeMateria(materia)                  // Limpa e normaliza dados
```

#### **pwaUtils.js**
Utilit√°rios para Progressive Web App
```javascript
// Fun√ß√µes principais:
- registerServiceWorker()                   // Registra service worker
- checkForUpdates()                         // Verifica atualiza√ß√µes
- cacheResources()                          // Armazena recursos em cache
- isOnline()                                // Verifica conectividade
```

---

## üîÑ Fluxo de Dados

### Login/Autentica√ß√£o
```
1. Usu√°rio ‚Üí LoginModal/RegisterModal
2. authService ‚Üí Firebase Auth
3. AuthContext ‚Üí Atualiza estado global
4. App.js ‚Üí Renderiza conte√∫do autenticado
```

### Gerenciamento de Mat√©rias
```
1. Usu√°rio ‚Üí AddMateriaModal/EditMateriaModal
2. Valida√ß√£o ‚Üí validation.js
3. materiaService ‚Üí Firebase Firestore (se online) ou localStorage
4. MateriasContext ‚Üí Atualiza estado
5. MateriaList ‚Üí Re-renderiza com novos dados
```

### Notifica√ß√µes
```
1. NotificationManager ‚Üí Verifica eventos
2. notificationService ‚Üí Agenda notifica√ß√µes
3. Service Worker ‚Üí Exibe notifica√ß√£o em background
4. Usu√°rio clica ‚Üí App abre/foca
```

---

## üíæ Armazenamento

### **LocalStorage**
- `materias` - Array de mat√©rias (modo offline)
- `isOnline` - Flag de modo online/offline
- `app_notifications` - Notifica√ß√µes da aplica√ß√£o
- `notification_settings` - Configura√ß√µes de notifica√ß√£o

### **Firebase Firestore**
```
/usuarios/{uid}/
  ‚îú‚îÄ‚îÄ nome: string
  ‚îú‚îÄ‚îÄ email: string
  ‚îî‚îÄ‚îÄ materias: [
      {
        nome: string,
        horas: number,
        faltas: number,
        maxFaltas: number,
        pesoFalta: number,
        datasFaltas: string[],
        avaliacoes: object[]
      }
    ]
```

---

## üé® Padr√µes de C√≥digo

### Estrutura de Componente React
```javascript
import React, { useState, useEffect } from 'react';

/**
 * Descri√ß√£o do componente
 * @param {Object} props - Props do componente
 */
function ComponentName({ prop1, prop2 }) {
  // Estados
  const [state, setState] = useState(initialValue);
  
  // Effects
  useEffect(() => {
    // Efeito
  }, [depend√™ncias]);
  
  // Handlers
  const handleAction = () => {
    // L√≥gica
  };
  
  // Render
  return (
    <div>
      {/* JSX */}
    </div>
  );
}

export default ComponentName;
```

### Estrutura de Servi√ßo
```javascript
/**
 * @fileoverview Descri√ß√£o do servi√ßo
 */

/**
 * Descri√ß√£o da fun√ß√£o
 * @param {type} param - Descri√ß√£o
 * @returns {type} Descri√ß√£o do retorno
 */
export const functionName = async (param) => {
  try {
    // L√≥gica
    return { success: true, data };
  } catch (error) {
    return { success: false, message: error.message };
  }
};
```

---

## üöÄ Scripts Dispon√≠veis

```bash
npm start          # Inicia servidor de desenvolvimento
npm run build      # Cria build de produ√ß√£o
npm test           # Executa testes
npm run lint       # Verifica c√≥digo
```

---

## üîê Vari√°veis de Ambiente

Criar arquivo `.env` na raiz:
```env
REACT_APP_FIREBASE_API_KEY=sua_api_key
REACT_APP_FIREBASE_AUTH_DOMAIN=seu_dominio.firebaseapp.com
REACT_APP_FIREBASE_PROJECT_ID=seu_projeto_id
REACT_APP_FIREBASE_STORAGE_BUCKET=seu_bucket.appspot.com
REACT_APP_FIREBASE_MESSAGING_SENDER_ID=seu_sender_id
REACT_APP_FIREBASE_APP_ID=seu_app_id
```

---

## üì± Features Implementadas

- ‚úÖ Autentica√ß√£o (Email/Senha + Google)
- ‚úÖ CRUD de Mat√©rias
- ‚úÖ Controle de Faltas
- ‚úÖ Modo Offline/Online
- ‚úÖ Notifica√ß√µes Push
- ‚úÖ Calend√°rio de Faltas
- ‚úÖ Dashboard com Estat√≠sticas
- ‚úÖ Sistema de Gamifica√ß√£o
- ‚úÖ Responsividade Mobile
- ‚úÖ PWA (Progressive Web App)

---

## üêõ Debugging

### Modo de Desenvolvimento
```javascript
// Ver estado atual no console
console.log('Materias:', materias);
console.log('User:', user);
console.log('Online:', isOnline);
```

### Verificar Firebase
```javascript
// No console do navegador
console.log(firebase.auth().currentUser);
```

---

## üìû Suporte

Para d√∫vidas ou problemas, consulte:
- C√≥digo fonte: Coment√°rios inline em cada arquivo
- Firebase Docs: https://firebase.google.com/docs
- React Docs: https://react.dev

---

**√öltima atualiza√ß√£o:** Outubro 2025
